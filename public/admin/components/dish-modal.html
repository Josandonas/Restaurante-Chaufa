<!-- Modal de Prato -->
<div class="modal" id="dishModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="modalTitle">Adicionar Prato</h2>
            <button class="modal-close" onclick="window.dishController.closeDishModal()">√ó</button>
        </div>
        <form id="dishForm">
            <div class="modal-body">
                <input type="hidden" id="dishId">
                <input type="hidden" id="dishTipo">
                
                <!-- Se√ß√£o: Informa√ß√µes B√°sicas -->
                <div class="form-section">
                    <div class="form-section-title">üìù Informa√ß√µes B√°sicas</div>
                    
                    <div class="form-group-full">
                        <label>Nome em Portugu√™s *</label>
                        <input type="text" id="nomePt" required placeholder="Ex: Arroz Chaufa de Frango">
                    </div>

                    <div class="form-group-full">
                        <label>Nombre en Espa√±ol *</label>
                        <input type="text" id="nomeEs" required placeholder="Ej: Arroz Chaufa de Pollo">
                    </div>

                    <div class="form-group-full">
                        <label>Categoria</label>
                        <select id="categoriaId">
                            <option value="">Sem categoria</option>
                        </select>
                    </div>
                </div>

                <!-- Se√ß√£o: Descri√ß√µes -->
                <div class="form-section">
                    <div class="form-section-title">üìÑ Descri√ß√µes</div>
                    
                    <div class="form-group-full">
                        <label>Descri√ß√£o em Portugu√™s</label>
                        <textarea id="descricaoPt" placeholder="Descreva o prato em portugu√™s..."></textarea>
                    </div>

                    <div class="form-group-full">
                        <label>Descripci√≥n en Espa√±ol</label>
                        <textarea id="descricaoEs" placeholder="Describe el plato en espa√±ol..."></textarea>
                    </div>
                </div>

                <!-- Se√ß√£o: Pre√ßos -->
                <div class="form-section">
                    <div class="form-section-title">üí∞ Pre√ßos</div>
                    
                    <!-- Indicador de Taxa de C√¢mbio -->
                    <div id="exchangeRateIndicator" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 12px 16px; border-radius: 8px; margin-bottom: 16px; display: flex; align-items: center; gap: 12px; box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);">
                        <span style="font-size: 1.5rem;">üí±</span>
                        <div style="flex: 1;">
                            <div style="font-size: 0.75rem; opacity: 0.9; font-weight: 500;">Taxa de C√¢mbio Atual</div>
                            <div style="font-size: 1.1rem; font-weight: 600;">1 BOB = <span id="currentExchangeRate">...</span> BRL</div>
                        </div>
                    </div>
                    
                    <div class="form-grid-2">
                        <div class="form-group-full">
                            <label style="display: flex; align-items: center; gap: 8px; font-weight: 600;">
                                <span style="font-size: 1.2rem;">üáßüá¥</span>
                                Precio en Bolivianos (Bs.) *
                            </label>
                            <div style="position: relative;">
                                <input type="number" step="0.01" id="precoBob" required placeholder="0.00" 
                                       min="0.01" max="99999.99"
                                       style="padding-left: 40px; font-size: 1.1rem; font-weight: 500;">
                                <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #6c757d; font-weight: 600; font-size: 1rem;">Bs.</span>
                            </div>
                            <small style="color: #6c757d; font-size: 0.75rem; margin-top: 4px; display: block;">
                                Valor entre 0.01 e 99,999.99
                            </small>
                        </div>
                        <div class="form-group-full">
                            <label style="display: flex; align-items: center; gap: 8px; font-weight: 600;">
                                <span style="font-size: 1.2rem;">üáßüá∑</span>
                                Pre√ßo em Reais (R$)
                                <span style="font-size: 0.75rem; color: #6c757d; font-weight: 400; background: #e9ecef; padding: 2px 8px; border-radius: 12px;">Auto</span>
                            </label>
                            <div style="position: relative;">
                                <input type="number" step="0.01" id="precoBrl" readonly placeholder="0.00" style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); cursor: not-allowed; padding-left: 40px; font-size: 1.1rem; font-weight: 500; border: 2px dashed #dee2e6;" tabindex="-1">
                                <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #6c757d; font-weight: 600; font-size: 1rem;">R$</span>
                                <span id="calculatingIndicator" style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); color: #667eea; font-size: 0.85rem; font-weight: 600; opacity: 0; transition: opacity 0.3s;">‚ö° Calculando...</span>
                            </div>
                            <small style="color: #6c757d; font-size: 0.8rem; margin-top: 6px; display: flex; align-items: center; gap: 4px;">
                                <span>üí°</span>
                                <span>Calculado automaticamente com base na taxa de c√¢mbio</span>
                            </small>
                        </div>
                    </div>
                </div>

                <!-- Se√ß√£o: Imagem -->
                <div class="form-section">
                    <div class="form-section-title">üì∏ Imagem do Prato (Opcional)</div>
                    
                    <div class="form-group-full">
                        <label>Imagem do Prato</label>
                        <div class="image-upload-container">
                            <input type="file" id="imagem" accept="image/*">
                            
                            <!-- Box de Upload -->
                            <div class="image-upload-box" id="uploadBox" onclick="document.getElementById('imagem').click()">
                                <div class="upload-icon">üì∏</div>
                                <div class="upload-text">Clique para selecionar uma imagem</div>
                                <div class="upload-hint">JPG, PNG ou WEBP (m√°x. 5MB)</div>
                            </div>

                            <!-- Preview da Imagem -->
                            <div class="image-preview-container" id="imagePreviewContainer">
                                <img id="imagePreview" class="image-preview" src="" alt="Preview">
                                <div class="image-preview-overlay">
                                    <button type="button" class="image-change-btn" onclick="document.getElementById('imagem').click()">
                                        üîÑ Trocar Imagem
                                    </button>
                                </div>
                                <button type="button" class="image-remove-btn" id="removeImageBtn" onclick="window.dishController.removeImage()">
                                    √ó
                                </button>
                                <div class="image-info" id="imageInfo"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Campo ordem oculto - gerenciado automaticamente pelos bot√µes ‚ñ≤‚ñº -->
                <input type="hidden" id="ordem" value="0">

                <!-- Toggle de Disponibilidade -->
                <div class="toggle-container">
                    <span class="toggle-icon">üçΩÔ∏è</span>
                    <span class="toggle-label" id="toggleLabel">Prato Dispon√≠vel</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="ativo" checked onchange="updateToggleLabel()">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>

            <div class="modal-actions">
                <button type="button" class="btn btn-secondary" onclick="window.dishController.closeDishModal()">Cancelar</button>
                <button type="submit" class="btn btn-primary">üíæ Salvar Prato</button>
            </div>
        </form>
    </div>
</div>
